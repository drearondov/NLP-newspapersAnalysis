<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="API" href="api.html" /><link rel="prev" title="Data" href="data.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2023.09.10 -->
        <title>Pipelines - Newspapers Analysis Documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=f2e8749c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #282828;
  --color-code-foreground: #dddddd;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Newspapers Analysis Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">Newspapers Analysis Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="data.html">Data</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="pipelines">
<h1>Pipelines<a class="headerlink" href="#pipelines" title="Link to this heading">#</a></h1>
<p>The project is comprised by 6 pipelines, and in this document I’ll
explain how each of them work.</p>
<p>The main library used throughout the project is <code class="docutils literal notranslate"><span class="pre">pandas</span></code> to make and
transform the <code class="docutils literal notranslate"><span class="pre">Dataframes</span></code>.</p>
<section id="data-retrieval">
<h2>Data Retrieval<a class="headerlink" href="#data-retrieval" title="Link to this heading">#</a></h2>
<p>Data was retrieved from 12 newspaper accounts from the main newspapers
of Perú. The selected newspapers are the following:</p>
<ul class="simple">
<li><p>El Comercio</p></li>
<li><p>La República</p></li>
<li><p>Trome</p></li>
<li><p>Ojo</p></li>
<li><p>Correo</p></li>
<li><p>Expreso</p></li>
<li><p>La Razón</p></li>
<li><p>Gestión</p></li>
<li><p>Perú 21</p></li>
<li><p>El Búho</p></li>
<li><p>En sus Trece</p></li>
<li><p>El Peruano</p></li>
</ul>
<p>This pipeline has two steps, the first steps retrieves the ID for each
of the Twitter accounts, and the second retrieves the tweets of the week
for each newspaper.</p>
<p>The main library used during this step is <code class="docutils literal notranslate"><span class="pre">requests</span></code>.</p>
<p><strong>Inputs:</strong> [STRIKEOUT:None]</p>
<p><strong>Outputs:</strong> <code class="docutils literal notranslate"><span class="pre">newspapers_id</span></code>, <code class="docutils literal notranslate"><span class="pre">raw_data</span></code></p>
</section>
<section id="cleaning-and-preproccesing">
<h2>Cleaning and Preproccesing<a class="headerlink" href="#cleaning-and-preproccesing" title="Link to this heading">#</a></h2>
<p>The first major pipeline, that takes the raw <code class="docutils literal notranslate"><span class="pre">JSON</span></code> data received from
the API, and converts it to a Pandas <code class="docutils literal notranslate"><span class="pre">Dataframe</span></code>. The cleaning process
follows 4 major transformations.</p>
<ul class="simple">
<li><p><em>Removes Tweets that do not contribute to the narrative overall:</em>
Tweets like, the picture with the daily headlines, daily caricatures,
horoscope, etc.</p></li>
<li><p><em>Converts numbers to words:</em> NLP procesing focuses mainly on words,
and numbers help us make sense of the scale of things happening (I
actually learned this because at first I took out al numbers, and
some of the tweets no longer made sense)</p></li>
<li><p>Cleaning symbols, puncturation and emojis</p></li>
<li><p><em>Remove calls to action and common words:</em> Words such as “Watch the
video now”, or “Read more” do not contribute to the narrative and as
such they were removed</p></li>
</ul>
<p><strong>Inputs:</strong> <code class="docutils literal notranslate"><span class="pre">raw_data</span></code></p>
<p><strong>Outputs:</strong> <code class="docutils literal notranslate"><span class="pre">clean_data</span></code></p>
</section>
<section id="feature-engireering">
<h2>Feature Engireering<a class="headerlink" href="#feature-engireering" title="Link to this heading">#</a></h2>
<p>The hear of the process, feature engineering is a process from which we
can shape the data in order to obtain the different data inputs we need
for the rest of the pipelines such as EDA, Sentiment Analysis and Topic
Modeling.</p>
<p>The process is divided into 2 stages:</p>
<section id="make-corpus">
<h3>Make Corpus<a class="headerlink" href="#make-corpus" title="Link to this heading">#</a></h3>
<p>Takes the clean data and returns a <code class="docutils literal notranslate"><span class="pre">Dataframe</span></code> with the original text,
and the corpus form or the tweet.</p>
<p><strong>Inputs:</strong> <code class="docutils literal notranslate"><span class="pre">clean_data</span></code></p>
<p><strong>Outputs:</strong> <code class="docutils literal notranslate"><span class="pre">corpus</span></code></p>
</section>
<section id="make-dtm">
<h3>Make DTM<a class="headerlink" href="#make-dtm" title="Link to this heading">#</a></h3>
<p>To make the DTM, the corpus needs to be tokenized and then counted in
order to form the matrix. So during the first first part, we take the
corpus and make an NLP object, and during the second part we count the
occurrences of each word and build the matrix.</p>
<p>For the NLP objects, the NLP library used is <code class="docutils literal notranslate"><span class="pre">spacy</span></code> as it has a
spanish model and allows for a single step tokenization, lemmatization
and removal of stop-words.</p>
<p><strong>Inputs:</strong> <code class="docutils literal notranslate"><span class="pre">corpus</span></code></p>
<p><strong>Outputs:</strong> <code class="docutils literal notranslate"><span class="pre">data_dtm</span></code>, <code class="docutils literal notranslate"><span class="pre">dtm</span></code>, <code class="docutils literal notranslate"><span class="pre">dtm_newspaper</span></code></p>
</section>
</section>
<section id="eda">
<h2>EDA<a class="headerlink" href="#eda" title="Link to this heading">#</a></h2>
<p>After the inital EDA process, some of the process were needed for
further analysis or to buils Analysis tools, as such, this pipeline
exist to provide those structures. The pipeline contains two nodes.</p>
<section id="unique-words">
<h3>Unique words<a class="headerlink" href="#unique-words" title="Link to this heading">#</a></h3>
<p>The calculation of the number of unique words per newspaper per week</p>
<p><strong>Inputs:</strong> <code class="docutils literal notranslate"><span class="pre">dtm_newspaper</span></code></p>
<p><strong>Outputs:</strong> <code class="docutils literal notranslate"><span class="pre">unique_words</span></code></p>
</section>
<section id="top-30-words">
<h3>Top 30 words<a class="headerlink" href="#top-30-words" title="Link to this heading">#</a></h3>
<p>Calculates the Top 30 words used by each newspaper each week. This stage
is particualrly useful as a QA control tool.</p>
<p><strong>Inputs:</strong> <code class="docutils literal notranslate"><span class="pre">dtm_newspaper</span></code></p>
<p><strong>Outputs:</strong> <code class="docutils literal notranslate"><span class="pre">top30_df</span></code></p>
</section>
</section>
<section id="sentiment-analysis">
<h2>Sentiment Analysis<a class="headerlink" href="#sentiment-analysis" title="Link to this heading">#</a></h2>
<p>A Machine Learning pipeline with two outputs:</p>
<ul class="simple">
<li><p>The probability that a certain tweets has a <code class="docutils literal notranslate"><span class="pre">POSITIVE</span></code>, <code class="docutils literal notranslate"><span class="pre">NEUTRAL</span></code>
or <code class="docutils literal notranslate"><span class="pre">NEGATIVE</span></code> sentiment.</p></li>
<li><p>The probability that a tweets expreses certain emotion</p></li>
</ul>
<p>The library used for this is
<a class="reference external" href="https://github.com/pysentimiento/pysentimiento/tree/master">PySentimiento</a></p>
<p><strong>Inputs:</strong> <code class="docutils literal notranslate"><span class="pre">corpus</span></code>, <code class="docutils literal notranslate"><span class="pre">emotion_analyzer</span></code>, <code class="docutils literal notranslate"><span class="pre">sentiment_analyzer</span></code></p>
<p><strong>Outputs:</strong> <code class="docutils literal notranslate"><span class="pre">corpus_sentiment-emotion</span></code></p>
</section>
<section id="topic-modeling">
<h2>Topic Modeling<a class="headerlink" href="#topic-modeling" title="Link to this heading">#</a></h2>
<p>A Machine Learning pipeline that aims to determine the topics used by
each newspaper throughout the weeks and thus showcase the change in the
narrative, in a straight forward manner.</p>
<p>The libraries used in this pipeline are: <code class="docutils literal notranslate"><span class="pre">Gensim</span></code>, <code class="docutils literal notranslate"><span class="pre">scipy</span></code></p>
<p><strong>Inputs:</strong> <code class="docutils literal notranslate"><span class="pre">data_dtm</span></code>, <code class="docutils literal notranslate"><span class="pre">dtm</span></code></p>
<p><strong>Outputs:</strong> <code class="docutils literal notranslate"><span class="pre">corpus_topic</span></code></p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="api.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">API</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="data.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Data</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Pipelines</a><ul>
<li><a class="reference internal" href="#data-retrieval">Data Retrieval</a></li>
<li><a class="reference internal" href="#cleaning-and-preproccesing">Cleaning and Preproccesing</a></li>
<li><a class="reference internal" href="#feature-engireering">Feature Engireering</a><ul>
<li><a class="reference internal" href="#make-corpus">Make Corpus</a></li>
<li><a class="reference internal" href="#make-dtm">Make DTM</a></li>
</ul>
</li>
<li><a class="reference internal" href="#eda">EDA</a><ul>
<li><a class="reference internal" href="#unique-words">Unique words</a></li>
<li><a class="reference internal" href="#top-30-words">Top 30 words</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sentiment-analysis">Sentiment Analysis</a></li>
<li><a class="reference internal" href="#topic-modeling">Topic Modeling</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=01f34227"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=32e29ea5"></script>
    </body>
</html>